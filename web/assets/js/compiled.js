(function(){function e(b){var a=parseInt(b,10);if(isNaN(a))throw Error("The integer value of "+b+" is NaN");return a}var c=window.CvPlsBacklog={};(function(){function b(a){a.preventDefault();window.open(a.currentTarget.href,this.linkTarget)}var a;a=c.DataTable=function(a,b){this.element=a;this.voteCounter=b;this.voteTypeDisplayStatus={}};a.prototype.element=void 0;a.prototype.voteCounter=void 0;a.prototype.rowCounts=void 0;a.prototype.voteTypeDisplayStatus=void 0;a.prototype.linkTarget="_self";a.prototype.init=
function(){var a,c,f,d,g,e,q,h,m=0,p=0;q=b.bind(this);a=this.element.querySelectorAll("tbody tr:not(.error-message)");this.rowCounts={};f=0;for(g=a.length;f<g;f++)for(h=a[f].className,void 0===this.voteTypeDisplayStatus[h]&&(this.voteTypeDisplayStatus[h]=1),void 0===this.rowCounts[h]&&(this.rowCounts[h]=0),this.rowCounts[h]++,c=a[f].querySelectorAll("a"),d=0,e=c.length;d<e;d++)c[d].hasAttribute("data-hasclickhandler")||(c[d].addEventListener("click",q,!1),c[d].setAttribute("data-hasclickhandler",
"true"));for(h in this.rowCounts)this.rowCounts.hasOwnProperty(h)&&(p+=this.rowCounts[h],1===this.voteTypeDisplayStatus[h]&&(m+=this.rowCounts[h]));this.voteCounter.setCurrent(m);this.voteCounter.setTotal(p)};a.prototype.hideVoteType=function(a){this.element.classList.contains("hide-"+a)||(this.element.classList.add("hide-"+a),this.voteTypeDisplayStatus[a]=0,void 0!==this.rowCounts[a]&&this.voteCounter.subtractCurrent(this.rowCounts[a]))};a.prototype.showVoteType=function(a){this.element.classList.contains("hide-"+
a)&&(this.element.classList.remove("hide-"+a),this.voteTypeDisplayStatus[a]=1,void 0!==this.rowCounts[a]&&this.voteCounter.addCurrent(this.rowCounts[a]))};a.prototype.setOpenInTabs=function(a){this.linkTarget=a?"_blank":"_self"};a.prototype.refresh=function(a){this.init();a()}})();(function(){function b(a){var b=this.nextRefresh-a;void 0!==this.textNode&&(a=Math.ceil(b/1E3),this.textNode.data=a);this.timeoutHandle=setTimeout(l.bind(this),b%1E3)}function a(){var a=(new Date).getTime();this.nextRefresh=
a+1E3*this.interval;b.call(this,a)}function k(){void 0!==this.textNode&&(this.textNode.data="Updating...");this.dataTable.refresh(a.bind(this))}function l(){var a=(new Date).getTime();a>=this.nextRefresh?k.call(this):b.call(this,a)}var f=c.DataTableAutoRefresher=function(a,b){this.dataTable=a;b&&b.firstChild&&b.firstChild instanceof Text&&(this.textNode=b.firstChild)};f.prototype.dataTable=void 0;f.prototype.textNode=void 0;f.prototype.interval=void 0;f.prototype.nextRefresh=void 0;f.prototype.timeoutHandle=
void 0;f.prototype.setInterval=function(a){var b;a=e(a);b=a-this.interval;this.interval=a;void 0!==this.timeoutHandle&&b&&(this.nextRefresh+=b)};f.prototype.enable=function(b){void 0===this.timeoutHandle&&(b?k.call(this):a.call(this))};f.prototype.disable=function(){void 0!==this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=void 0)}})();(function(){function b(a){a?(this.dataTableRefresher.setInterval(a),this.dataTableRefresher.enable()):this.dataTableRefresher.disable();this.settingsManager.saveSetting("autoRefreshInterval",
a)}function a(){b.call(this,e(this.element.options[this.element.selectedIndex].value))}var k=c.AutoRefreshSelect=function(a,b,c){this.element=a;this.dataTableRefresher=b;this.settingsManager=c};k.prototype.element=void 0;k.prototype.dataTableRefresher=void 0;k.prototype.settingsManager=void 0;k.prototype.init=function(){var c,k,d=this.settingsManager.getSetting("autoRefreshInterval");c=0;for(k=this.element.options.length;c<k;c++)if(e(this.element.options[c].value)===d){this.element.selectedIndex=
c;break}void 0!==d&&b.call(this,d);this.element.addEventListener("change",a.bind(this),!1)}})();(function(){var b=c.QuestionCounter=function(a,b){if(!(a&&a.firstChild&&a.firstChild instanceof Text))throw Error("The supplied current element does not have a text node as its first child");this.currentTextNode=a.firstChild;if(!(b&&b.firstChild&&b.firstChild instanceof Text))throw Error("The supplied total element does not have a text node as its first child");this.totalTextNode=b.firstChild};b.prototype.currentTextNode=
void 0;b.prototype.totalTextNode=void 0;b.prototype.setCurrent=function(a){this.currentTextNode.data=String(e(a))};b.prototype.setTotal=function(a){this.totalTextNode.data=String(e(a))};b.prototype.getCurrent=function(){return e(this.currentTextNode.data)};b.prototype.addCurrent=function(a){this.currentTextNode.data=String(this.getCurrent()+e(a))};b.prototype.subtractCurrent=function(a){this.currentTextNode.data=String(this.getCurrent()-e(a))}})();(function(){var b=c.SettingsManager=function(a){this.storageEngine=
a};b.prototype.storageEngine=void 0;b.prototype.getSetting=function(a){try{return JSON.parse(this.storageEngine.getItem(a))}catch(b){}};b.prototype.saveSetting=function(a,b){this.storageEngine.setItem(a,JSON.stringify(b))}})();(function(){var b=c.Checkbox=function(){};b.prototype.element=void 0;b.prototype.dataTable=void 0;b.prototype.settingsManager=void 0;b.prototype.settingName=void 0;b.prototype.init=function(){this.element.checked=this.getCurrentSetting();this.element.addEventListener("change",
this.onChange.bind(this),!1);this.onChange()};b.prototype.reset=function(){this.element.checked=this.element.hasAttribute("checked");this.onChange()};b.prototype.getCurrentSetting=function(){var a=this.settingsManager.getSetting(this.settingName);return"boolean"!==typeof a?this.element.hasAttribute("checked"):Boolean(a)};b.prototype.saveCurrentSetting=function(){this.settingsManager.saveSetting(this.settingName,this.element.checked)}})();(function(){var b=c.LinkTargetCheckbox=function(a,b,c){this.element=
a;this.dataTable=b;this.settingsManager=c;this.settingName="linkTarget"};b.prototype=new c.Checkbox;b.prototype.onChange=function(){this.dataTable.setOpenInTabs(this.element.checked);this.saveCurrentSetting()}})();(function(){var b=c.VoteTypeCheckbox=function(a,b,c){this.element=a;this.dataTable=b;this.settingsManager=c;this.voteType=a.id.split("-").pop();this.settingName="voteType-"+this.voteType};b.prototype=new c.Checkbox;b.prototype.voteType=void 0;b.prototype.onChange=function(){this.element.checked?
this.dataTable.hideVoteType(this.voteType):this.dataTable.showVoteType(this.voteType);this.saveCurrentSetting()}})();(function(){function b(){var a,b;a=0;for(b=this.controls.length;a<b;a++)this.controls[a].reset()}var a=c.FormResetter=function(a){this.element=a};a.prototype.element=void 0;a.prototype.controls=void 0;a.prototype.init=function(){this.controls=[];this.element.addEventListener("click",b.bind(this),!1)};a.prototype.addControl=function(a){return this.controls.push(a)}})();(function(){var b,
a,e,l,f,d,g;e=["cv","delv","ro","rv","adelv"];f=new c.SettingsManager(window.localStorage);l=new c.DataTable(document.getElementById("data-table"),new c.QuestionCounter(document.getElementById("questions-count-current"),document.getElementById("questions-count-total")));l.init();d=new c.FormResetter(document.getElementById("reset-options"));d.init();g=new c.LinkTargetCheckbox(document.getElementById("check-tabs"),l,f);d.addControl(g);g.init();b=0;for(a=e.length;b<a;b++)g=new c.VoteTypeCheckbox(document.getElementById("check-"+
e[b]),l,f),d.addControl(g),g.init();(new c.AutoRefreshSelect(document.getElementById("refresh-interval"),new c.DataTableAutoRefresher(l,document.getElementById("refresh-notice")),f)).init()})()})();(function(){var e=document.getElementById("data-table-head"),c=e.offsetTop;document.getElementById("sticky-legend-icons").innerHTML=document.getElementById("legend-icons").innerHTML;window.addEventListener("scroll",function(){window.scrollY>=c?e.classList.add("sticky"):e.classList.remove("sticky")})})();
(function(){var e=document.getElementById("questions-timestamp"),c=new Date(1E3*Number(document.getElementById("data-table-body").getAttribute("data-timestamp"))),b=c.getHours(),a=c.getMinutes(),c=c.getSeconds();e.textContent=(10>b?"0"+b:b)+":"+(10>a?"0"+a:a)+":"+(10>c?"0"+c:c)})();(function(){var e=function(c){function b(a){return a.cells.item(g).textContent.toLowerCase()}function a(a,c){var e=parseInt(b(a),10),d=parseInt(b(c),10),e=isNaN(e)?-1:e,d=isNaN(d)?-1:d;return e>d?1:e<d?-1:0}function e(a,c){var d=b(a),f=b(c);return d>f?1:d<f?-1:0}function l(){var a="asc"!==n?"asc":"desc";d.className=(d.className.replace(n,"")+" "+a).trim();n=a}function f(b){d&&g!==b.target.cellIndex&&(d.className=d.className.replace("asc","").replace("desc",""),n="");d=b.target;if("th"===d.nodeName.toLowerCase()){g=
d.cellIndex;var f=document.getElementById("data-table-body");b=f.rows;var m;if(b){switch(d.getAttribute("data-treat-as")){case "int":m=a;break;default:m=e}b=c.sort.call(c.slice.call(b,0),m);"asc"===n&&c.reverse.call(b);l();f.innerHtml="";c.forEach.call(b,function(a){f.appendChild(a)})}}}var d,g,n="";return{init:function(){var a=document.getElementById("table-column-names").getElementsByTagName("th");c.forEach.call(a,function(a){a.onclick=f})}}}(Array.prototype);document.addEventListener("readystatechange",
function(){"complete"===document.readyState&&e.init()})})();
